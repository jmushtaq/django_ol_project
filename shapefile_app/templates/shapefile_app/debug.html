{% extends 'shapefile_app/base.html' %}

{% block content %}
<div class="container">
    <h2>Shapefile Debug: {{ shapefile.name }}</h2>
    
    <div class="card mb-3">
        <div class="card-header">
            <h5>Basic Info</h5>
        </div>
        <div class="card-body">
            <p><strong>ID:</strong> {{ shapefile.id }}</p>
            <p><strong>Features:</strong> {{ feature_count }}</p>
            <p><strong>Uploaded:</strong> {{ shapefile.uploaded_at }}</p>
        </div>
    </div>

<!--
    <div class="card mb-3">
        <div class="card-header">
            <h5>Bounds (WGS84)</h5>
        </div>
        <div class="card-body">
            <p><strong>Min Lon:</strong> {{ bounds.min_lon }}</p>
            <p><strong>Max Lon:</strong> {{ bounds.max_lon }}</p>
            <p><strong>Min Lat:</strong> {{ bounds.min_lat }}</p>
            <p><strong>Max Lat:</strong> {{ bounds.max_lat }}</p>
        </div>
    </div>
-->

    <div class="card">
        <div class="card-header">
            <h5>GeoJSON Sample</h5>
        </div>
        <div class="card-body">
            <pre style="max-height: 300px; overflow-y: auto;">{{ geojson_sample }}</pre>
        </div>
    </div>

    <div class="card mb-3">
        <div class="card-header">
            <h5>Processed Data Info</h5>
        </div>
        <div class="card-body">
            <p><strong>Processed Data Available:</strong> {% if shapefile.geojson_data_processed %}Yes{% else %}No{% endif %}</p>
            {% if shapefile.geojson_data_processed %}
                <p><strong>Processed Features:</strong> {{ shapefile.get_processed_geojson_feature_collection.features|length }}</p>
            {% endif %}
        </div>
    </div>

    <a href="{% url 'map_view' %}" class="btn btn-primary mt-3">Back to Map</a>
</div>
{% endblock %}
